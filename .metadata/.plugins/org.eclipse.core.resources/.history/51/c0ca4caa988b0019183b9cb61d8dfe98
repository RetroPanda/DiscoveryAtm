package com.discovery.bank.service;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.discovery.bank.model.ClientAccount;
import com.discovery.bank.repo.AccountRepository;

@Service
public class AtmService {
	@Autowired
	AccountRepository accRepository;
	
	@Autowired
	CurrencyRepository currencyRepository;
	
	public List<ClientAccount> getAllAccounts() {
		List<ClientAccount> accounts = new ArrayList<ClientAccount>();
		accRepository.findAll().forEach((account) -> accounts.add(account));	
	     return accounts;  
	}

	public List<ClientAccount> getAccountsByClientId(int id) {
		
		List<ClientAccount> accounts = new ArrayList<ClientAccount>();
		
		//repository.findAllClientAccountsByCurrencyCode("ZAR").forEach((account) -> accounts.add(account));
	
		accRepository.findByClientId(id).forEach((account) -> accounts.add(account));
		
		
//		accounts.sort(new Comparator<ClientAccount>() {
//            @Override
//            public int compare(ClientAccount account1, ClientAccount account2) {
//            	return account1.getDisplayBalance().compareTo(account2.getDisplayBalance());
//             }
//        });
		return accounts;
	}

}
